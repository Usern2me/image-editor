<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>ÊâπÊîπÁºñËæëÂô®</title>
    <link type="text/css" href="https://uicdn.toast.com/tui-color-picker/v2.2.3/tui-color-picker.css" rel="stylesheet">
    <link type="text/css" href="../dist/tui-image-editor.css" rel="stylesheet">
    <style>
        @import url(http://fonts.googleapis.com/css?family=Noto+Sans);

        html,
        body {
            height: 100%;
            margin: 0;
        }

        .tui-image-editor-header {
            margin: 10px;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        .tui-image-editor-header-buttons {
            display: flex;
            justify-content: flex-end;
        }

        .primary_btn {
            height: 40px;
            width: 120px;
            margin: 0 10px;
            padding: 0;
            display: inline-block;
            background-color: #fdba3b;
            color: #fff;
            line-height: 40px;
            outline: none;
            border-radius: 20px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            vertical-align: middle;
            letter-spacing: 0.3px;
            text-align: center;
        }

        .normal_btn {
            height: 40px;
            width: 120px;
            display: inline-block;
            background-color: #fff;
            color: black;
            padding: 0;
            margin: 0 10px;
            line-height: 40px;
            outline: none;
            border-radius: 20px;
            border: 1px solid #ddd;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            vertical-align: middle;
            letter-spacing: 0.3px;
            text-align: center;
        }

        .tui-image-editor-header-papers {
            display: flex;
            justify-content: space-between;
            height: 150px;
            padding: 10px;
            background-color: rgba(255, 255, 255, .7);
            z-index: 1;
            position: absolute;
            top: 62px;
            width: 97%;
            text-align: center;
            transition: all 1s;
        }

        .tui-image-editor-header-papers-container {
            width: 66%;
            height: 150px;
            display: flex;
            overflow-x: auto;
            overflow-y: hidden;
            border: 1px solid gray;
            border-radius: 5px;
        }

        .tui-image-editor-header-papers-left {
            border: 1px solid;
            border-radius: 5px;
            height: 50px;
            width: 50px;
            margin-top: 50px;
            margin-left: 100px;
            text-align: center;
            line-height: 40px;
        }

        .tui-image-editor-header-papers-left:hover {
            cursor: pointer;
            transform: scale(1.05);
            box-shadow: 2px 2px 2px rgba(155, 155, 155, .5);
        }

        .tui-image-editor-header-papers-right:hover {
            cursor: pointer;
            transform: scale(1.05);
            box-shadow: 2px 2px 2px rgba(155, 155, 155, .5);
        }

        .tui-image-editor-header-papers-right {
            border: 1px solid;
            border-radius: 5px;
            height: 50px;
            width: 50px;
            float: right;
            text-align: center;
            margin-right: 100px;
            margin-top: 50px;
            line-height: 40px;
        }

        .tui-image-editor-header-papers-box {
            height: 92%;
            flex: 0;
            margin: 5px;
        }

        .tui-image-editor-header-papers-box:hover {
            cursor: pointer;
            box-shadow: 2px 2px 2px rgba(155, 155, 155, .5);
        }

        .tui-image-editor-selectedBox {
            border: 2px solid #fdba3b;
            box-shadow: 2px 2px 2px rgba(155, 155, 155, .5);
        }

        .displayNone {
            display: none !important;
        }
    </style>
</head>

<body>
    <div class="tui-image-editor-header">
        <div class="tui-image-editor-header-buttons">
            <div id="paper_list_btn" class="primary_btn">‰Ωú‰∏öÂàóË°®</div>
            <!-- <div id="paper_reset" class="normal_btn">
                ÈáçÊñ∞ÊâπÊîπ
            </div> -->
            <div id="paper_list_next" class="normal_btn">‰∏ã‰∏ÄÈ¢ò</div>
            <div id="paper_save" class="primary_btn">
                ‰øùÂ≠ò
            </div>
        </div>
        <div class="tui-image-editor-header-papers displayNone">
            <div id="papaer_image_pre" class="tui-image-editor-header-papers-left">üëà</div>
            <div class="tui-image-editor-header-papers-container">
            </div>
            <div id="papaer_image_next" class="tui-image-editor-header-papers-right">üëâ</div>
        </div>
    </div>
    <div id="tui-image-editor-container"></div>
    <script type="text/javascript" src="https://cdn.bootcss.com/fabric.js/3.4.0/fabric.min.js"></script>
    <script type="text/javascript"
        src="https://uicdn.toast.com/tui.code-snippet/v1.5.0/tui-code-snippet.min.js"></script>
    <script type="text/javascript" src="https://uicdn.toast.com/tui-color-picker/v2.2.3/tui-color-picker.js"></script>
    <script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/1.3.3/FileSaver.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script type="text/javascript" src="../dist/tui-image-editor.js"></script>
    <script type="text/javascript" src="../examples/js/theme/white-theme.js"></script>
    <script>
        const windowHeight = document.body.clientHeight;
        const windowWidth = document.body.clientWidth;
        // Image editor
        const imageEditor = new tui.ImageEditor('#tui-image-editor-container', {
            includeUI: {
                loadImage: {
                    path: 'https://q-independent.aixuexi.com/B:1019:K/1564934400/46ffb802aab84ae59f42033a2f086b4f.JPEG',
                    name: 'SampleImage'
                },
                theme: whiteTheme, // or whiteTheme
                initMenu: 'select',
                menuBarPosition: 'left'
            },
            cssMaxWidth: windowWidth,
            cssMaxHeight: windowHeight,
            usageStatistics: false
        });

        window.onresize = function () {
            imageEditor.ui.resizeEditor();
        }
        let selectIndex = 0;
        const paperRef = document.getElementsByClassName("tui-image-editor-header")[0];

        // ‰Ωú‰∏öÂàóË°®
        const paper_list_btn = document.getElementById("paper_list_btn");
        // ‰∏ã‰∏ÄÈ¢ò
        const paper_list_next = document.getElementById("paper_list_next");
        // ‰øùÂ≠ò‰Ωú‰∏ö
        const paper_save = document.getElementById("paper_save");
        // ÊâÄÊúâ‰Ωú‰∏öÁöÑref
        const paperList = document.getElementsByClassName("tui-image-editor-header-papers")[0];
        // ‰∏ä‰∏ÄÂº†‰Ωú‰∏ö
        const papaer_image_pre = document.getElementById("papaer_image_pre")
        // ‰∏ã‰∏ÄÂº†‰Ωú‰∏ö
        const papaer_image_next = document.getElementById("papaer_image_next")

        // Ê∑ªÂä†ÊâÄÊúâÁöÑÁõëÂê¨‰∫ã‰ª∂
        function addAllEvents() {
            paper_list_btn.addEventListener('click', function (e) {
                paperList.classList.toggle('displayNone');
            })
            paper_list_next.addEventListener('click', function (e) {
                console.log('click--> ‰∏ã‰∏ÄÈ¢ò')
            })
            paper_save.addEventListener('click', function (e) {
                const imageUrl = imageEditor.downLoadImage();
                console.log('click--> ‰øùÂ≠ò‰Ωú‰∏ö', imageUrl)
            })
            papaer_image_pre.addEventListener('click', function (e) {
                changeImage(selectIndex - 1);
            })
            papaer_image_next.addEventListener('click', function (e) {
                changeImage(selectIndex + 1);
            })
        }
        function getRemoteImage() {
            // Êé•Âè£Ëé∑ÂèñÊï∞ÊçÆ
            const imageLists = ['https://q-independent.aixuexi.com/B:1019:K/1564934400/46ffb802aab84ae59f42033a2f086b4f.JPEG', 'https://q-independent.aixuexi.com/B:1019:K/1564934400/b6b8168ac96e4079bb5b7657e39a88af.JPEG', 'https://q-independent.aixuexi.com/B:1019:K/1565020800/f3fa95c33bfe45268ef1e6d6f7a98224.jpg', 'https://q-independent.aixuexi.com/B:1019:K/1565020800/e8f0d6162c9d4bb6ad5614748728a766.jpg'];
            loadAllPapers(imageLists);
        }
        // Âä†ËΩΩÊâÄÊúâÁöÑËØïÂç∑
        function loadAllPapers(imageLists) {
            const imageContainer = document.getElementsByClassName("tui-image-editor-header-papers-container")[0];
            const imageBox = document.getElementsByClassName('tui-image-editor-header-papers-box');
            const allImageRef = imageLists.map((imageUrl, index) => {
                if (index === 0) {
                    return `<img data-index="${index}" class="tui-image-editor-header-papers-box tui-image-editor-selectedBox" src="${imageUrl}"/>`;
                }

                return `<img data-index="${index}" class="tui-image-editor-header-papers-box" src="${imageUrl}"/>`;
            });
            imageContainer.innerHTML = allImageRef;
            snippet.forEach(imageBox, element => {
                element.addEventListener('click', function (e) {
                    changeImage(e.target.dataset.index)
                })
            })
        }
        // ÊîπÂèòÂõæÁâá
        function changeImage(index) {
            image_box = document.getElementsByClassName("tui-image-editor-header-papers-box");
            const srcList = [];
            snippet.forEach(image_box, element => {
                srcList.push(element.src);
            });
            if (index < 0) {
                selectIndex = 0;
            } else if (index >= srcList.length) {
                selectIndex = srcList.length - 1;
            } else {
                selectIndex = index;
            }

            snippet.forEach(image_box, element => {
                element.classList.remove('tui-image-editor-selectedBox');
            });
            image_box[selectIndex].classList.add('tui-image-editor-selectedBox');
            imageEditor.loadImageFromURL(srcList[selectIndex], 'paperName');
            imageEditor.resetCanvas();
        }
        addAllEvents();
        getRemoteImage();
    </script>
</body>

</html>
